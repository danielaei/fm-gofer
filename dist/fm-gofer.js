!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.FMGofer=o():e.FMGofer=o()}(this,(function(){return function(){"use strict";var e={d:function(o,r){for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.r(o),e.d(o,{PerformScriptWithOption:function(){return p},PerformScript:function(){return w}});var t=function(){return"object"===r(window.fmGofer)&&null!==window.fmGofer&&!Array.isArray(window.fmGofer)},n=function(){return t()?window.fmGofer.callbackName:null},i=function(){window.fmGofer={promises:{},callbackName:null}},f=function(e,o,r,t){var n={resolve:e,reject:o};0!==r&&(n.timeoutID=setTimeout((function(){o(t)}),r));var i="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}));return window.fmGofer.promises[i]=n,i},u=function(e){return window.fmGofer.promises[e]},c=function(e){return delete window.fmGofer.promises[e]},l=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{"0"===r&&(r=!1);var t=u(e);if(void 0===t)throw new Error("No promise found for promiseID ".concat(e,"."));t.timeoutID&&clearTimeout(t.timeoutID),r?t.reject(o):t.resolve(o),c(e)}catch(e){console.error(e),alert(e)}},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"fmGoferD7738642C91848E08720EAC24EDDA483";if("string"!=typeof e||!e)throw new Error("callbackName must be a non-empty string");t()||i(),window[e]=l,window.fmGofer.callbackName=e},m=function(e,o,t){var n,i;"object"!==r(window.FileMaker)?(n=setInterval((function(){"object"===r(window.FileMaker)&&(clearTimeout(i),clearInterval(n),window.FileMaker.PerformScriptWithOption(e,o,t))}),5),i=setTimeout((function(){throw clearInterval(n),new Error("window.FileMaker not found")}),2e3)):window.FileMaker.PerformScriptWithOption(e,o,t)},d=3e3,s="The FM script call timed out",p=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s;if("string"!=typeof e||!e)throw new Error("script must be a string");if("number"!=typeof u)throw new Error("timeout must be a number");if("string"!=typeof c)throw new Error("timeoutMessage must be a string");return new Promise((function(l,d){t()||i(),n()||a();var s=f(l,d,u,c),p=n(),w=JSON.stringify({promiseID:s,callbackName:p,parameter:o});m(e,w,r)}))},w=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,n=void 0;return p(e,o,n,r,t)};return o}()}));