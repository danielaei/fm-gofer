var e={d:(r,o)=>{for(var t in o)e.o(o,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:o[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)},r={};e.d(r,{M:()=>a,B:()=>l});const o=()=>"object"==typeof window.fmGofer&&null!==window.fmGofer&&!Array.isArray(window.fmGofer),t=()=>o()?window.fmGofer.callbackName:null,i=()=>{window.fmGofer={promises:{},callbackName:null}},n=(e,r=null,o="")=>{try{"0"===o&&(o=!1);const t=(e=>window.fmGofer.promises[e])(e);if(void 0===t)throw new Error(`No promise found for promiseID ${e}.`);t.timeoutID&&clearTimeout(t.timeoutID),o?t.reject(r):t.resolve(r),(e=>{delete window.fmGofer.promises[e]})(e)}catch(e){console.error(e),alert(e)}},a=(e,r=null,a=0,l=3e3,m="The FM script call timed out")=>{if("string"!=typeof e||!e)throw new Error("script must be a string");if("number"!=typeof l)throw new Error("timeout must be a number");if("string"!=typeof m)throw new Error("timeoutMessage must be a string");return new Promise(((w,f)=>{o()||i(),t()||((e="fmGoferD7738642C91848E08720EAC24EDDA483")=>{if("string"!=typeof e||!e)throw new Error("callbackName must be a non-empty string");o()||i(),window[e]=n,window.fmGofer.callbackName=e})();const s=((e,r,o,t)=>{const i={resolve:e,reject:r};0!==o&&(i.timeoutID=setTimeout((()=>{r(t)}),o));const n="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(e=>{var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)}));return window.fmGofer.promises[n]=i,n})(w,f,l,m),c=t(),x=JSON.stringify({promiseID:s,callbackName:c,parameter:r});((e,r,o)=>{if("object"==typeof window.FileMaker)return void window.FileMaker.PerformScriptWithOption(e,r,o);let t,i;t=setInterval((()=>{"object"==typeof window.FileMaker&&(clearTimeout(i),clearInterval(t),window.FileMaker.PerformScriptWithOption(e,r,o))}),5),i=setTimeout((()=>{throw clearInterval(t),new Error("window.FileMaker not found")}),2e3)})(e,x,a)}))},l=(e,r=null,o=3e3,t="The FM script call timed out")=>a(e,r,void 0,o,t);var m=r.B,w=r.M;export{m as PerformScript,w as PerformScriptWithOption};