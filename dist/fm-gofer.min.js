!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((e="undefined"!=typeof globalThis?globalThis:e||self).FMGofer={})}(this,(function(e){"use strict";var o="The FM script call timed out",r="fmGoferD7738642C91848E08720EAC24EDDA483";function t(){("object"!=typeof window.fmGofer||null===window.fmGofer||Array.isArray(window.fmGofer))&&(window.fmGofer={promises:{},callbackName:r},window[r]=n)}function i(e,o,r,t){var i={resolve:e,reject:o};0!==r&&(i.timeoutID=setTimeout((function(){o(t)}),r));var n="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}));return window.fmGofer.promises[n]=i,n}function n(e,o,r){try{"0"===r&&(r="");var t=function(e){return window.fmGofer.promises[e]}(e);if(void 0===t)throw new Error("No promise found for promiseID ".concat(e,"."));t.timeoutID&&clearTimeout(t.timeoutID),r?t.reject(o):t.resolve(o),function(e){delete window.fmGofer.promises[e]}(e)}catch(e){console.error(e)}}function f(e,n,f,c,u){if(void 0===c&&(c=15e3),void 0===u&&(u=o),"string"!=typeof e||!e)throw new Error("script must be a string");if("number"!=typeof c)throw new Error("timeout must be a number");if("string"!=typeof u)throw new Error("timeoutMessage must be a string");return new Promise((function(o,a){t();var m=i(o,a,c,u),s=JSON.stringify({promiseID:m,callbackName:r,parameter:n});!function(e,o,r){if("object"!=typeof window.FileMaker)var t=setTimeout((function(){throw clearInterval(i),new Error("window.FileMaker not found")}),2e3),i=setInterval((function(){"object"==typeof window.FileMaker&&(clearTimeout(t),clearInterval(i),window.FileMaker.PerformScriptWithOption(e,o,r))}),5);else window.FileMaker.PerformScriptWithOption(e,o,r)}(e,s,f)}))}function c(e,r,t,i){void 0===r&&(r=void 0),void 0===t&&(t=15e3),void 0===i&&(i=o);return f(e,r,undefined,t,i)}var u={PerformScript:c,PerformScriptWithOption:f};e.PerformScript=c,e.PerformScriptWithOption=f,e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
